

--> ANTES DE COME√áAR... üåí
    > Antes de come√ßar a alterar a analysis, VOC√ä DEVE ter o conhecimento m√≠nimo sobre a TAGO.IO. Por isso, recomendo que leia todos os t√≥picos deste artigo... --> https://help.tago.io/portal/en/kb/tagoio 



--> QUAL √â A FINALIDADE DO PROJETO?üíª
    > O projeto tem como objetivo consultar um servidor ftp, capturar os arquivos que est√£o l√°, realizar a decodifica√ß√£o dos arquivos,
    inserir os dados decodificado dentro da plataforma TAGO.IO e remover o arquivo que j√° foi decodificado do diret√≥rio principal do servidor. 
    Para realizar todas as tarefas acima, o meu code precisa ser uma analysis externa da TAGO.IO.


 

--> QUAL √â O PONTO DE PARTIDA DO MEU ALGORITIMO("por onde ele come√ßa?")üõ£Ô∏è
    > O script tem como ponto de partida o arquivo index.js. Dentro deste arquivo, eu tenho uma fun√ß√£o chamada: Decoding_analysis, 
    esta fun√ß√£o ser√° respons√°vel por integrar o meu script local, com a plataforma da TAGO.IO.

    > Mas como essa integra√ß√£o acontece(meu script vs TAGO.IO)?
    Essa integra√ß√£o acontece quando eu instalo um npm(pr√≥pio da tago), fa√ßo a importa√ß√£o de uma classe(chamada "analysis") e na hora de instaci√°-la eu passa 2 argumentos(a minha fun√ß√£o e o token da analysis) 
    Para saber o que √© e como uma analysis funciona, eu recomendo ler a documenta√ß√£o da TAGO.IO,
    que explica o que √© uma analysis, como ela √© acionada, como criar e como rod√°-la de maneira externa(que √© o caso deste script). --> https://help.tago.io/portal/en/kb/articles/29-analysis-overview


   

--> QUANDO DEVO EXECUTAR O C√ìDIGO NA MINHA M√ÅQUINA LOCAL E QUANDO DEVO SUB√ç-LO PARA A TAGO?üíº
    > Geralmente, enquanto o c√≥digo est√° em fase de desenvolvimento √© melhor desenvolv√™-lo na sua m√°quina local, pois com o compilador, voc√™ tem acesso a diversar ferramentas(ferramentas que voc√™ n√£o tem acesso dentro da TAGO).
    > Al√©m das ferramentas, voc√™ pode usar servi√ßos de terceiros, como: bibliotecas, frameworks etc... 
    > Ap√≥s terminar o desenvolvimento em sua m√°quina local, voc√™ precisa criar um "build" do projeto e sub√≠-lo para a TAGO.IO.

    > Como buildar o projeto e sub√≠-lo para a Tago? --> Aqui est√° um link da documenta√ß√£o da tago que vai te auxiliar nesse processo --> https://help.tago.io/portal/en/kb/articles/174-running-analysis-as-external-using-node-js#4_Use_Analysis-Builder_to_Upload_the_Script 




--> COMO FUNCIONA A ORGANIZA√á√ÉO DE PASTAS DO PROJETO?üìö
   > A pasta project √© respons√°vel por armazenar todo o nosso script. Dentro desta pasta, temos o arquivo: index.js. Respons√°vel por dar in√≠cio ao nosso algoritimo.
   > O arquivo index.js tem um alto n√≠vel de acoplamento com os m√≥dulos que est√£o armazenados dentro da pasta classes.
   > Dentro destas classes, temos duas pastas, a pasta "Apis" e a pasta "decoding_files". Dentro da pasta "Apis" eu tenho todas as requisi√ß√µes externas utilizadas por todo o meu algoritmo. E dentro da pasta decoding_files, temos 3 m√≥dulos: stx, soc, prov. Cada m√≥dulo possui uma classe respons√°vel por decodificar os arquivos pertencentes a cada device( stx device, soc device e prov messages ). 
   




--> REGRAS DE NEG√ìCIOüî•

>> Decodifica√ß√£o de arquivos SOC
    ?O que √© um arquivo soc? --> um arquivo SOC √© uma nomenclatura que n√≥s utilizamos para nos referir a um arquivo XML que foi emitido pelo dispositivo Smart-One-C.
    > Um arquivo SOC pode conter 3 tipos diferentes de dados, estes s√£o: DEFAULT MESSAGEü•á    TRUNCATE MESSAGEü•à     TYPE 3 MESSAGEü•â.
    > Cada tipo de mensagem possui uma decodifica√ß√£o diferente. Voc√™ pode encontrar as fun√ß√µes respons√°veis por decodificar estas mensagens dentro da classe do Smart-One-C(soc.js) --> Preciso ajustar o c√≥digo para o princ√≠pio S do solid(cada classe deve ter apenas uma responsabilidade) ou seja, devo criar uma classe para cada tipo de mensagem e uma classe abstrata smart_one_c, para guradar m√©todos como: decode_lat, decode_lng, get_hexa_code_from_file etc...
    >Para entender melhor como funciona a decodifica√ß√£o de cada tipo de mensagem, a leitura do manual de usu√°rio smart_one_c √© fundamental.

>> Decodifica√ß√£o de arquivos STX
    ?O que √© um arquivo stx? --> um arquivo STX √© uma nomenclatura que n√≥s utilizamos para nos referir a um arquivo XML que foi emitido pelo dispositivo STX.
    > Para entender melhor como funciona a decodifica√ß√£o do arquivo  STX, voc√™ deve ler o manual de decodifica√ß√£o do device.

>> Como saber se um arquivo √© do tipo SOC ou STX?
    > Cada device possui uma ESN(identificador √∫nico), esta ESN vem dentro do arquivo... Para identificar qual √© o tipo do device, √© necess√°rio capturar a sua ESN e filtrar o dispositivo que est√£o dentro da TAGO.IO que possuem esta ESN armazenada em sua tag.
    Ao realizar essa busca, a plataforma ir√° me retornar o device(informa√ß√µes como: device_id e todas as suas tags), todo dispositivbo cadastrado na TAGO.IO possui uma tag com sua ESN e uma tag com o seu tipo. Assim basta ver qual √© o tipo do device e posteriormente inserir os dados no device devido.






